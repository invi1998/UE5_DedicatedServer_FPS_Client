# Creating a Module

现在，我们已经准备好了AWS服务器，以及API接口，接下来需要在我们的虚幻引擎项目中创建一个模块，以封装我们所有的专用服务器代码

1：在项目源代码下，新增模块文件夹，去项目模块下拷贝`.h .cpp .Build.cs`这三个文件到新模块下，修改代码（主要就是替换名称）

![image-20241202204857828](.\image-20241202204857828.png)

2：重新构建VS项目，然后打开项目，将模块添加到项目设置里

![image-20241202205028721](.\image-20241202205028721.png)

3：在项目编译目标文件里（.Target.cs）添加新模块内容

![image-20241202205155341](.\image-20241202205155341.png)

4：将新模块添加入项目依赖里

![image-20241202205329001](.\image-20241202205329001.png)



现在，我们就准备好了一个新的模块，该模块将用于开发服务器代码，并且该模块与我们的项目模块是分开的。



`NewObject` 和 `CreateDefaultSubobject` 是 Unreal Engine 中用于创建对象的两个不同函数，它们有着不同的用途和行为。

1. `NewObject<T>()`:
   - 这是一个模板函数，用于在运行时动态地创建一个新对象。
   - 它可以用来创建任何类型的对象，并且允许你指定对象的名称、外层对象（Owner）以及其它构造参数。
   - 创建的对象通常不是默认子对象的一部分，而是根据需要临时或动态创建的对象。
   - 使用 `NewObject` 时，你需要确保正确管理对象的生命周期，因为它不会自动处理。
2. `CreateDefaultSubobject<T>(Name)`:
   - 这个函数专门用于在类的构造函数中创建默认子对象（通常是组件如 StaticMeshComponent, SkeletalMeshComponent 等）。
   - 创建的对象会成为拥有它的类的一部分，并且会在该类的所有实例中存在。
   - 这些对象在编辑器中是可见的，并且可以在编辑器中进行配置。
   - 当拥有这些子对象的父对象被创建或复制时，这些子对象也会被创建或复制。
   - 使用 `CreateDefaultSubobject` 创建的对象的生命周期与父对象绑定，不需要额外管理。

你应该使用 `CreateDefaultSubobject` 来初始化那些应该总是作为类的一部分存在的组件。而当你需要在运行时根据特定条件创建对象时，应该使用 `NewObject`。例如，在游戏过程中动态添加的组件或者当需要创建不属于任何特定类的独立对象时，你可以使用 `NewObject`。

